{"version":3,"sources":["utilities/WindowDims.jsx","components/header/Header.jsx","components/login/Login.jsx","components/register/Register.jsx","components/map/Map.jsx","App.js","index.js"],"names":["getWindowDimensions","window","width","innerWidth","height","innerHeight","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","Header","props","className","AppBar","style","backgroundColor","Toolbar","currentUser","ref","geoRef","Button","size","color","borderRadius","onClick","onLogout","onLogin","onRegister","Login","error","setError","invalidUsername","setInvalidUsername","invalidPassword","setInvalidPassword","usernameRef","useRef","passwordRef","setInvalidFalse","event","a","preventDefault","username","current","value","toLowerCase","pw","password","axios","post","res","setLocalStorage","user","data","display","displayname","setCurrentUser","onClose","console","log","fontSize","onSubmit","type","placeholder","onChange","variant","margin","Register","success","setSuccess","emptyUsername","setEmptyUsername","emptyDisplayname","setEmptyDisplayname","emptyEmail","setEmptyEmail","emptyPassword","setEmptyPassword","invalidDisplayname","setInvalidDisplayname","invalidEmail","setInvalidEmail","displaynameRef","emailRef","email","length","newUser","setTimeout","onRegisterComplete","tooManyUsers","temporaryPinId","mapboxgl","workerClass","require","default","Map","storedUser","localStorage","getItem","setTooManyUsers","pins","setPins","tooManyPins","setTooManyPins","currentPinId","setCurrentPinId","addingPin","setAddingPin","deletingPin","setDeletingPin","initialShowRegister","showRegister","setShowRegister","showLogin","setShowLogin","newPlace","setNewPlace","title","setTitle","desc","setDesc","rating","setRating","invalidTitle","setInvalidTitle","invalidDesc","setInvalidDesc","invalidRating","setInvalidRating","mapDrag","setMapDrag","latitude","longitude","zoom","viewport","setViewport","mapRef","geocoderContainerRef","geocoderRef","titleRef","handleMarkerClick","pinId","lat","long","handleAddPinButtonClick","userPinCounter","forEach","pin","newPin","handleLogout","removeItem","handleMapDrag","drag","_id","newPins","filter","getPins","get","getUsers","mapboxApiAccessToken","process","onViewportChange","nextViewport","newViewport","mapStyle","transitionDuration","transitionInterpolator","FlyToInterpolator","doubleClickZoom","onDblClick","lngLat","dragPan","onMouseEnter","onMouseLeave","containerRef","onResult","result","center","text","clearAndBlurOnEsc","Zoom","in","setItem","offsetLeft","offsetTop","map","zIndex","position","cursor","closeButton","closeOnClick","anchor","Array","fill","format","createdAt","startIcon","classes","label","handleDeletePinYesClick","right","target","selected","disabled","hidden","Paper","elevation","top","left","transform","padding","Fab","bottom","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1e3db6c5.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n","//jshint esversion:6\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport ExploreIcon from \"@material-ui/icons/Explore\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport useWindowDimensions from \"../../utilities/WindowDims.jsx\";\r\n\r\n// My files\r\nimport \"./Header.scss\";\r\n\r\nfunction Header(props) {\r\n  const { height, width } = useWindowDimensions();\r\n\r\n  function handleLogout() {\r\n    props.onLogout();\r\n  }\r\n  function handleLogin() {\r\n    props.onLogin();\r\n  }\r\n  function handleRegister() {\r\n    props.onRegister();\r\n  }\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <AppBar style={{ backgroundColor: \"#111D5E\" }}>\r\n        <Toolbar>\r\n          <ExploreIcon />\r\n          <h1 className={props.currentUser ? \"title no-title\" : \"title\"}>\r\n            trippin\r\n          </h1>\r\n          {props.currentUser && <div ref={props.geoRef} className=\"geocoder\" />}\r\n          {props.currentUser && width > 485 && (\r\n            <div className=\"logout-btn\">\r\n              <Button\r\n                size=\"large\"\r\n                style={{\r\n                  height: \"30px\",\r\n                  color: \"#C2FFD9\",\r\n                  borderRadius: \"10px\",\r\n                }}\r\n                onClick={handleLogout}\r\n              >\r\n                LOG OUT\r\n              </Button>\r\n            </div>\r\n          )}\r\n          {!props.currentUser && (\r\n            <div className=\"login-btns\">\r\n              <Button\r\n                size=\"large\"\r\n                style={{\r\n                  height: \"30px\",\r\n                  color: \"#9DDAC6\",\r\n                  borderRadius: \"10px\",\r\n                }}\r\n                onClick={handleLogin}\r\n              >\r\n                LOGIN\r\n              </Button>\r\n              <Button\r\n                size=\"large\"\r\n                style={{\r\n                  height: \"30px\",\r\n                  color: \"#C2FFD9\",\r\n                  borderRadius: \"10px\",\r\n                }}\r\n                onClick={handleRegister}\r\n              >\r\n                REGISTER\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","//jshint esversion:6\r\nimport Button from '@material-ui/core/Button';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport ExploreIcon from '@material-ui/icons/Explore';\r\nimport axios from 'axios';\r\nimport { useRef, useState } from 'react';\r\n\r\n// My files\r\nimport './Login.scss';\r\n\r\nfunction Login(props) {\r\n\r\n    const [error, setError] = useState(false);\r\n\r\n    const [invalidUsername, setInvalidUsername] = useState(false);\r\n    const [invalidPassword, setInvalidPassword] = useState(false);\r\n\r\n    const usernameRef = useRef();\r\n    const passwordRef = useRef();\r\n\r\n    function setInvalidFalse() {\r\n        setInvalidUsername(false);\r\n        setInvalidPassword(false);\r\n        setError(false);\r\n    }\r\n\r\n    async function handleSubmit(event) {\r\n        event.preventDefault();\r\n\r\n        const username = usernameRef.current.value.toLowerCase();\r\n        const pw = passwordRef.current.value;\r\n\r\n        if (username === \"\" || username === null) {\r\n            setInvalidUsername(true);\r\n            return;\r\n        } else if (pw === \"\" || pw === null) {\r\n            setInvalidPassword(true);\r\n            return;\r\n        }\r\n\r\n        const currentUser = {\r\n            username: username,\r\n            password: pw\r\n        };\r\n\r\n        try {\r\n            setError(false);\r\n            const res = await axios.post(\"/users/login\", currentUser);\r\n                props.setLocalStorage({user: res.data.username, display: res.data.displayname});\r\n                props.setCurrentUser({user: res.data.username, display: res.data.displayname});\r\n                props.onClose();\r\n            \r\n        } catch (err) {\r\n            setError(true);\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <div className=\"logo\">\r\n                <ExploreIcon fontSize=\"large\"/>\r\n            </div>\r\n\r\n            <CancelIcon className=\"cancel\" onClick={()=>props.onClose()}/>\r\n\r\n            <h3 className=\"login-header\">trippin</h3>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <input\r\n                    className=\"inputs\"\r\n                    type=\"text\"\r\n                    placeholder=\"Username\"\r\n                    ref={usernameRef}\r\n                    onClick={setInvalidFalse}\r\n                    onChange={setInvalidFalse}\r\n                ></input>\r\n                {invalidUsername &&\r\n                    <span className=\"login-error\">Please enter a username.</span>\r\n                }\r\n\r\n                <input\r\n                    className=\"inputs\"\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    ref={passwordRef}\r\n                    onClick={setInvalidFalse}\r\n                    onChange={setInvalidFalse}\r\n                ></input>\r\n                {invalidPassword &&\r\n                    <span className=\"login-error\">Please enter a password.</span>\r\n                }\r\n\r\n                <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    size=\"large\"\r\n                    style={{\r\n                        color: \"white\",\r\n                        width: \"100%\",\r\n                        backgroundColor: '#111D5E',\r\n                        margin: \"15px auto 5px\"\r\n                    }}\r\n                >\r\n                    LOGIN\r\n                </Button>\r\n                {error &&\r\n                    <span className=\"login-error\">Invalid username/password combo.</span>\r\n                }\r\n            </form>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","//jshint esversion:6\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport ExploreIcon from \"@material-ui/icons/Explore\";\r\nimport axios from \"axios\";\r\nimport { useRef, useState } from \"react\";\r\n\r\n// My files\r\nimport \"./Register.scss\";\r\n\r\nfunction Register(props) {\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(false);\r\n\r\n  const [emptyUsername, setEmptyUsername] = useState(false);\r\n  const [emptyDisplayname, setEmptyDisplayname] = useState(false);\r\n  const [emptyEmail, setEmptyEmail] = useState(false);\r\n  const [emptyPassword, setEmptyPassword] = useState(false);\r\n  const [invalidUsername, setInvalidUsername] = useState(false);\r\n  const [invalidDisplayname, setInvalidDisplayname] = useState(false);\r\n  const [invalidEmail, setInvalidEmail] = useState(false);\r\n  const [invalidPassword, setInvalidPassword] = useState(false);\r\n\r\n  const usernameRef = useRef();\r\n  const displaynameRef = useRef();\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n\r\n  function setInvalidFalse() {\r\n    setEmptyUsername(false);\r\n    setEmptyDisplayname(false);\r\n    setEmptyEmail(false);\r\n    setEmptyPassword(false);\r\n    setInvalidUsername(false);\r\n    setInvalidDisplayname(false);\r\n    setInvalidEmail(false);\r\n    setInvalidPassword(false);\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    const user = usernameRef.current.value.toLowerCase();\r\n    const display = displaynameRef.current.value;\r\n    const email = emailRef.current.value;\r\n    const pw = passwordRef.current.value;\r\n\r\n    // Username validation\r\n    if (user === \"\" || user === null) {\r\n      setEmptyUsername(true);\r\n      return;\r\n    } else if (user.length < 3 || user.length > 18) {\r\n      setInvalidUsername(true);\r\n      return;\r\n    }\r\n\r\n    // Display name validaion\r\n    if (display === \"\" || display === null) {\r\n      setEmptyDisplayname(true);\r\n      return;\r\n    } else if (display.length > 18) {\r\n      setInvalidDisplayname(true);\r\n      return;\r\n    }\r\n\r\n    // Email validation\r\n    if (email === \"\" || email === null) {\r\n      setEmptyEmail(true);\r\n      return;\r\n    } else if (email.length > 75) {\r\n      setInvalidEmail(true);\r\n      return;\r\n    }\r\n\r\n    // Password validation\r\n    if (pw === \"\" || pw === null) {\r\n      setEmptyPassword(true);\r\n      return;\r\n    } else if (pw.length < 6 || display.length > 50) {\r\n      setInvalidPassword(true);\r\n      return;\r\n    }\r\n\r\n    const newUser = {\r\n      username: user,\r\n      displayname: display,\r\n      email: email,\r\n      password: pw,\r\n    };\r\n\r\n    try {\r\n      setSuccess(false);\r\n      setError(false);\r\n      await axios.post(\"/users/register\", newUser);\r\n      setSuccess(true);\r\n      usernameRef.current.value = \"\";\r\n      displaynameRef.current.value = \"\";\r\n      emailRef.current.value = \"\";\r\n      passwordRef.current.value = \"\";\r\n      setTimeout(() => {\r\n        props.onClose();\r\n        props.onRegisterComplete();\r\n      }, 3000);\r\n    } catch (err) {\r\n      setError(true);\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!props.tooManyUsers ? (\r\n        <div className=\"register-container\">\r\n          <div className=\"logo\">\r\n            <ExploreIcon fontSize=\"large\" />\r\n          </div>\r\n\r\n          <CancelIcon className=\"cancel\" onClick={() => props.onClose()} />\r\n\r\n          <h3 className=\"register-header\">trippin</h3>\r\n          <p className=\"register-info\">\r\n            Pin locations to a map. Submit reviews. See others' reviews.\r\n          </p>\r\n          <form onSubmit={handleSubmit}>\r\n            <input\r\n              className=\"inputs\"\r\n              type=\"text\"\r\n              placeholder=\"Username\"\r\n              ref={usernameRef}\r\n              onClick={setInvalidFalse}\r\n              onChange={setInvalidFalse}\r\n            ></input>\r\n            {emptyUsername && (\r\n              <span className=\"register-error\">Please enter a username.</span>\r\n            )}\r\n            {invalidUsername && (\r\n              <span className=\"register-error\">\r\n                Must be 3 to 18 characters long.\r\n              </span>\r\n            )}\r\n\r\n            <input\r\n              className=\"inputs\"\r\n              type=\"text\"\r\n              placeholder=\"Display Name\"\r\n              ref={displaynameRef}\r\n              onClick={setInvalidFalse}\r\n              onChange={setInvalidFalse}\r\n            ></input>\r\n            {emptyDisplayname && (\r\n              <span className=\"register-error\">\r\n                Please enter a display name.\r\n              </span>\r\n            )}\r\n            {invalidDisplayname && (\r\n              <span className=\"register-error\">\r\n                Must be 1 to 18 characters long.\r\n              </span>\r\n            )}\r\n\r\n            <input\r\n              className=\"inputs\"\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              ref={emailRef}\r\n              onClick={setInvalidFalse}\r\n              onChange={setInvalidFalse}\r\n            ></input>\r\n            {emptyEmail && (\r\n              <span className=\"register-error\">Please enter an email.</span>\r\n            )}\r\n            {invalidEmail && (\r\n              <span className=\"register-error\">\r\n                Email must not be greater than 75 characters.\r\n              </span>\r\n            )}\r\n\r\n            <input\r\n              className=\"inputs\"\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              ref={passwordRef}\r\n              onClick={setInvalidFalse}\r\n              onChange={setInvalidFalse}\r\n            ></input>\r\n            {emptyPassword && (\r\n              <span className=\"register-error\">Please enter a password.</span>\r\n            )}\r\n            {invalidPassword && (\r\n              <span className=\"register-error\">\r\n                Must be 6 to 50 characters long.\r\n              </span>\r\n            )}\r\n\r\n            {!success && (\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                style={{\r\n                  color: \"white\",\r\n                  width: \"100%\",\r\n                  backgroundColor: \"#FF4848\",\r\n                  margin: \"15px auto 5px\",\r\n                }}\r\n              >\r\n                REGISTER\r\n              </Button>\r\n            )}\r\n            {success && (\r\n              <span className=\"register-success\">Registered successfully!</span>\r\n            )}\r\n            {error && (\r\n              <span className=\"register-error\">Failed to register.</span>\r\n            )}\r\n          </form>\r\n        </div>\r\n      ) : (\r\n        <div className=\"register-container-too-many-users\">\r\n          <CancelIcon className=\"cancel\" onClick={() => props.onClose()} />\r\n          <span>\r\n            Sorry, there are too many users! We currently only allow a finite\r\n            number of users. Please contact the creator of the website.\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","//jshint esversion:6\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport ReactMapGL, { FlyToInterpolator, Marker, Popup } from 'react-map-gl';\r\nimport axios from 'axios';\r\nimport { format } from 'timeago.js';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport Geocoder from 'react-map-gl-geocoder';\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\r\n\r\n// My files\r\nimport Header from \"../header/Header.jsx\";\r\nimport Login from \"../login/Login.jsx\";\r\nimport Register from \"../register/Register.jsx\";\r\nimport useWindowDimensions from '../../utilities/WindowDims.jsx';\r\nimport './Map.scss';\r\n\r\n// Material-UI\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport Zoom from '@material-ui/core/Zoom';\r\n\r\nlet temporaryPinId = null;\r\n\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nmapboxgl.workerClass = require('worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker').default;\r\n\r\nfunction Map() {\r\n  const { height, width } = useWindowDimensions();\r\n\r\n  const storedUser = {\r\n    user: window.localStorage.getItem(\"user\"),\r\n    display: window.localStorage.getItem(\"display\")\r\n  };\r\n\r\n  const [currentUser, setCurrentUser] = useState(storedUser);\r\n  const [tooManyUsers, setTooManyUsers] = useState(false);\r\n\r\n  const [pins, setPins] = useState([]);\r\n  const [tooManyPins, setTooManyPins] = useState(false);\r\n  const [currentPinId, setCurrentPinId] = useState(null);\r\n  const [addingPin, setAddingPin] = useState(false);\r\n  const [deletingPin, setDeletingPin] = useState(false);\r\n\r\n  const initialShowRegister = (currentUser === null || currentUser === \"\") ? true : false;\r\n  const [showRegister, setShowRegister] = useState(initialShowRegister);\r\n  const [showLogin, setShowLogin] = useState(false);\r\n\r\n  const [newPlace, setNewPlace] = useState(null);\r\n  const [title, setTitle] = useState(null);\r\n  const [desc, setDesc] = useState(null);\r\n  const [rating, setRating] = useState(0);\r\n\r\n  const [invalidTitle, setInvalidTitle] = useState(false);\r\n  const [invalidDesc, setInvalidDesc] = useState(false);\r\n  const [invalidRating, setInvalidRating] = useState(false);\r\n\r\n  const [mapDrag, setMapDrag] = useState(true);\r\n\r\n  const [viewport, setViewport] = useState({\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    latitude: 36.64920667168877,\r\n    longitude: -21.007683545740246,\r\n    zoom: 2\r\n  });\r\n\r\n  const mapRef = useRef();\r\n  const geocoderContainerRef = useRef();\r\n  const geocoderRef = useRef();\r\n  const titleRef = useRef();\r\n\r\n  function onViewportChange(newViewport) {\r\n    setViewport({ ...newViewport, width: \"100vw\", height: \"100vh\" });\r\n  }\r\n\r\n  // Opens the popup for the clicked pin, centering the screen on that pin.\r\n  function handleMarkerClick(pinId, lat, long) {\r\n    setCurrentPinId(pinId);\r\n    setDeletingPin(false);\r\n    setViewport({ ...viewport, latitude: lat, longitude: long });\r\n  }\r\n\r\n  // Set addingPin === true. Additionally, remember which pin\r\n  // the user has opened just in case they cancel.\r\n  function handleAddPinButtonClick() {\r\n    let userPinCounter = 0;\r\n    pins.forEach(pin => {\r\n      if (currentUser && (pin.username === currentUser.user)) userPinCounter++;\r\n    });\r\n\r\n    // Prevent the user from having over 5 pins.\r\n    if (userPinCounter > 4) {\r\n      setTooManyPins(true);\r\n      setTimeout(() => setTooManyPins(false), 5000);\r\n    } else {\r\n      temporaryPinId = currentPinId;\r\n      setAddingPin(true);\r\n    }\r\n\r\n    setCurrentPinId(null);\r\n  }\r\n\r\n  // Set addingPin === false. Additionally, open the popup of the\r\n  // remembered pin before pressing +ADD PIN, if any.\r\n  function handleCancelButtonClick() {\r\n    setAddingPin(false);\r\n    setNewPlace(null);\r\n    setCurrentPinId(temporaryPinId);\r\n  }\r\n\r\n  // Triggered when a user double clicks somewhere while adding a pin.\r\n  function handleAddPinClick(event) {\r\n\r\n    setInvalidTitle(false);\r\n    setInvalidDesc(false);\r\n    setInvalidRating(false);\r\n\r\n    if (!addingPin) {\r\n      setCurrentPinId(null);\r\n      return;\r\n    }\r\n\r\n    const [long, lat] = event.lngLat;\r\n\r\n    setNewPlace({\r\n      lat,\r\n      long\r\n    });\r\n  }\r\n\r\n  // Adds a new pin.\r\n  async function handleSubmit(event) {\r\n\r\n    event.preventDefault();\r\n\r\n    if (title === \"\" || title === null) {\r\n      setInvalidTitle(true);\r\n      return;\r\n    } else if (desc === \"\" || desc === null) {\r\n      setInvalidDesc(true);\r\n      return;\r\n    } else if (rating < 1 || rating > 5 || rating === null) {\r\n      setInvalidRating(true);\r\n      return;\r\n    }\r\n\r\n    const newPin = {\r\n      displayname: currentUser.display,\r\n      username: currentUser.user,\r\n      title,\r\n      desc,\r\n      rating,\r\n      lat: newPlace.lat,\r\n      long: newPlace.long\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\"/pins\", newPin);\r\n      setPins([...pins, res.data]);\r\n      setNewPlace(null);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n\r\n    setAddingPin(false);\r\n    setTitle(null);\r\n    setDesc(null);\r\n    setRating(null);\r\n    setDeletingPin(false);\r\n  }\r\n\r\n  // Saves the user's login session to the browser.\r\n  function setLocalStorage(data) {\r\n    localStorage.setItem(\"user\", data.user);\r\n    localStorage.setItem(\"display\", data.display);\r\n  }\r\n\r\n  function handleLogout() {\r\n    localStorage.removeItem(\"user\");\r\n    setCurrentUser(null);\r\n    setAddingPin(false);\r\n  }\r\n\r\n  function handleMapDrag(drag) {\r\n    return setMapDrag(drag);\r\n  }\r\n\r\n  function handleOnResult(result) {\r\n    const [long, lat] = result.result.center;\r\n    if (addingPin) {\r\n      setNewPlace({ lat, long });\r\n      titleRef.current.value = result.result.text;\r\n    }\r\n  }\r\n\r\n  function handleGeocoderViewportChange(newViewport) {\r\n    const geocoderDefaultOverrides = { transitionDuration: 1000 };\r\n\r\n    return setViewport({ ...newViewport, ...geocoderDefaultOverrides });\r\n  }\r\n\r\n  async function handleDeletePinYesClick(pinId) {\r\n    const newPin = { _id: pinId };\r\n\r\n    try {\r\n      await axios.post(\"/pins/delete\", newPin);\r\n      const newPins = pins.filter(pin => pin._id !== pinId);\r\n      setPins(newPins);\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n\r\n    setCurrentPinId(null);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const getPins = async () => {\r\n      try {\r\n        const res = await axios.get(\"/pins\");\r\n        setPins(res.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n\r\n    const getUsers = async () => {\r\n      try {\r\n        const res = await axios.get(\"/users\");\r\n        if (res.data.length > 49) {\r\n          setTooManyUsers(true);\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n\r\n    getPins();\r\n    getUsers();\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <ReactMapGL\r\n        ref={mapRef}\r\n        {...viewport}\r\n        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\r\n        onViewportChange={nextViewport => onViewportChange(nextViewport)}\r\n        mapStyle=\"mapbox://styles/safak/cknndpyfq268f17p53nmpwira\"\r\n        transitionDuration={15}\r\n        transitionInterpolator={new FlyToInterpolator()}\r\n        doubleClickZoom={false}\r\n        onDblClick={handleAddPinClick}\r\n        dragPan={mapDrag ? true : false}\r\n      >\r\n\r\n        <div onMouseEnter={() => handleMapDrag(false)} onMouseLeave={() => handleMapDrag(true)}>\r\n          <Header\r\n            geoRef={geocoderContainerRef}\r\n            currentUser={currentUser}\r\n            localStorage={localStorage}\r\n            onLogout={handleLogout}\r\n            onRegister={() => {\r\n              setShowRegister(!showRegister);\r\n              setShowLogin(false);\r\n            }}\r\n            onLogin={() => {\r\n              setShowRegister(false);\r\n              setShowLogin(!showLogin);\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {currentUser && addingPin &&\r\n          <div className=\"geocoder\">\r\n            <Geocoder\r\n              ref={geocoderRef}\r\n              mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\r\n              viewport={viewport}\r\n              mapRef={mapRef}\r\n              containerRef={geocoderContainerRef}\r\n              placeholder=\"Search for a place...\"\r\n              onViewportChange={handleGeocoderViewportChange}\r\n              onResult={handleOnResult}\r\n              clearAndBlurOnEsc={true}\r\n            />\r\n          </div>\r\n        }\r\n\r\n        {showLogin &&\r\n          <div onMouseEnter={() => handleMapDrag(false)} onMouseLeave={() => handleMapDrag(true)}>\r\n            <Zoom in={true}>\r\n              <Login\r\n                currentUser={currentUser}\r\n                localStorage={localStorage}\r\n                setCurrentUser={(user) => setCurrentUser(user)}\r\n                setLocalStorage={(user) => { setLocalStorage(user) }}\r\n                onClose={() => {\r\n                  setShowLogin(false);\r\n                  handleMapDrag(true);\r\n                }} />\r\n            </Zoom>\r\n          </div>\r\n        }\r\n\r\n        {showRegister &&\r\n          <div onMouseEnter={() => handleMapDrag(false)} onMouseLeave={() => handleMapDrag(true)}>\r\n            <Zoom in={true}>\r\n              <Register\r\n                currentUser={currentUser}\r\n                onClose={() => {\r\n                  setShowRegister(false);\r\n                  handleMapDrag(true);\r\n                }}\r\n                onRegisterComplete={() => setShowLogin(true)}\r\n                tooManyUsers={tooManyUsers} />\r\n            </Zoom>\r\n          </div>\r\n        }\r\n\r\n        {addingPin && newPlace !== null &&\r\n          <Marker\r\n            latitude={newPlace.lat}\r\n            longitude={newPlace.long}\r\n            offsetLeft={-20}\r\n            offsetTop={-40}\r\n          >\r\n            <Zoom in={true} >\r\n              <RoomIcon\r\n                style={{\r\n                  fontSize: \"40px\",\r\n                  color: \"#FF4848\"\r\n                }}\r\n              />\r\n            </Zoom>\r\n          </Marker>\r\n        }\r\n\r\n        {pins.map(pin => (\r\n\r\n          <div key={pin._id}>\r\n\r\n            <div style={{ zIndex: \"0\", position: \"fixed\" }}>\r\n              <Marker\r\n                latitude={pin.lat}\r\n                longitude={pin.long}\r\n                offsetLeft={-20}\r\n                offsetTop={-40}\r\n              >\r\n                <Zoom in={!addingPin && !showRegister && !showLogin ? true : false} >\r\n                  <RoomIcon\r\n                    style={{\r\n                      fontSize: \"40px\",\r\n                      color: currentPinId === pin._id ? \"#FF4848\" : (currentUser && pin.username === currentUser.user) ? \"#111D5E\" : \"#7B8B94\",\r\n                      cursor: \"pointer\"\r\n                    }}\r\n                    onClick={() => (\r\n                      currentPinId === null ? handleMarkerClick(pin._id, pin.lat, pin.long) : (currentPinId === pin._id ? setCurrentPinId(null) : handleMarkerClick(pin._id, pin.lat, pin.long))\r\n                    )}\r\n                  />\r\n                </Zoom>\r\n              </Marker>\r\n            </div>\r\n\r\n            {currentPinId === pin._id && !showRegister && !showLogin &&\r\n\r\n              <div className=\"popup\">\r\n\r\n                <Zoom in={true}>\r\n                  <Popup\r\n                    latitude={pin.lat}\r\n                    longitude={pin.long}\r\n                    offsetLeft={20}\r\n                    closeButton={true}\r\n                    closeOnClick={false}\r\n                    onClose={() => setCurrentPinId(null)}\r\n                    anchor=\"left\" >\r\n\r\n                    <div className=\"card\">\r\n                      <h4 className=\"title\">{pin.title}</h4>\r\n                      <label>Review:</label>\r\n                      <p className=\"desc\">{pin.desc}</p>\r\n                      <label>Rating:</label>\r\n                      <div className=\"stars\" >\r\n                        {Array(pin.rating).fill(<StarIcon className=\"star\" />)}\r\n                      </div>\r\n                      <label>Information:</label>\r\n                      <span className=\"username\">Created by <b>{pin.displayname}</b></span>\r\n                      <span className=\"createdDate\">{format(pin.createdAt)}</span>\r\n\r\n                      {currentUser && pin.username === currentUser.user && !deletingPin &&\r\n                        <Button\r\n                          variant=\"contained\"\r\n                          color=\"secondary\"\r\n                          size=\"large\"\r\n                          startIcon={<DeleteIcon />}\r\n                          style={{\r\n                            width: \"100%\",\r\n                            backgroundColor: '#7B8B94',\r\n                            margin: \"15px auto 5px\"\r\n                          }}\r\n                          classes={{ label: 'pin-button' }}\r\n                          onClick={() => setDeletingPin(true)}\r\n                        >\r\n                          DELETE PIN\r\n                        </Button>\r\n                      }\r\n\r\n                      {currentUser && pin.username === currentUser.user && deletingPin && (currentPinId !== null) &&\r\n                        <div>\r\n                          <p className=\"deleting-pin\">Are you sure you want to delete this pin?</p>\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            size=\"large\"\r\n                            startIcon={<CheckIcon />}\r\n                            style={{\r\n                              width: \"45%\",\r\n                              backgroundColor: '#FF4848',\r\n                              margin: \"15px auto 5px\"\r\n                            }}\r\n                            classes={{ label: 'pin-button' }}\r\n                            onClick={() => handleDeletePinYesClick(pin._id)}\r\n                          >\r\n                            YES\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            size=\"large\"\r\n                            startIcon={<ClearIcon />}\r\n                            style={{\r\n                              position: \"absolute\",\r\n                              right: \"10px\",\r\n                              width: \"45%\",\r\n                              backgroundColor: '#7B8B94',\r\n                              margin: \"15px auto 5px\"\r\n                            }}\r\n                            classes={{ label: 'pin-button' }}\r\n                            onClick={() => setDeletingPin(false)}\r\n                          >\r\n                            NO\r\n                          </Button>\r\n                        </div>\r\n                      }\r\n                    </div>\r\n                  </Popup>\r\n                </Zoom>\r\n\r\n              </div>\r\n            }\r\n          </div>\r\n        ))}\r\n\r\n        {newPlace && addingPin &&\r\n          <Zoom in={true}>\r\n            <Popup\r\n              latitude={newPlace.lat}\r\n              longitude={newPlace.long}\r\n              offsetLeft={20}\r\n              closeButton={true}\r\n              closeOnClick={false}\r\n              onClose={() => setNewPlace(null)}\r\n              anchor=\"left\" >\r\n\r\n              <div>\r\n\r\n                <form onSubmit={handleSubmit}>\r\n\r\n                  <label>Place name</label>\r\n                  <input\r\n                    ref={titleRef}\r\n                    placeholder=\"Enter a title...\"\r\n                    onClick={() => setInvalidTitle(false)}\r\n                    onChange={(event) => setTitle(event.target.value)}\r\n                  ></input>\r\n                  {invalidTitle &&\r\n                    <Zoom in={true}>\r\n                      <div className=\"error\">\r\n\r\n                        <ErrorIcon\r\n                          size=\"small\"\r\n                          style={{ color: \"#7B8B94\" }}\r\n                        ></ErrorIcon>\r\n                        <p>Please enter a place name.</p>\r\n\r\n                      </div>\r\n                    </Zoom>\r\n                  }\r\n\r\n                  <label>Review</label>\r\n                  <textarea\r\n                    placeholder=\"Tell us about this place...\"\r\n                    onClick={() => setInvalidDesc(false)}\r\n                    onChange={(event) => setDesc(event.target.value)}\r\n                  ></textarea>\r\n                  {invalidDesc &&\r\n                    <Zoom in={true}>\r\n                      <div className=\"error\">\r\n\r\n                        <ErrorIcon\r\n                          size=\"small\"\r\n                          style={{ color: \"#7B8B94\" }}\r\n                        ></ErrorIcon>\r\n                        <p>Please enter a description.</p>\r\n\r\n                      </div>\r\n                    </Zoom>\r\n                  }\r\n\r\n                  <label>Rating</label>\r\n                  <select onClick={() => setInvalidRating(false)} onChange={(event) => setRating(event.target.value)}>\r\n                    <option value=\"\" selected disabled hidden>Choose rating...</option>\r\n                    <option value=\"1\">1</option>\r\n                    <option value=\"2\">2</option>\r\n                    <option value=\"3\">3</option>\r\n                    <option value=\"4\">4</option>\r\n                    <option value=\"5\">5</option>\r\n                  </select>\r\n                  {invalidRating &&\r\n                    <Zoom in={true}>\r\n                      <div className=\"error\">\r\n\r\n                        <ErrorIcon\r\n                          size=\"small\"\r\n                          style={{ color: \"#7B8B94\" }}\r\n                        ></ErrorIcon>\r\n                        <p>Please enter a rating.</p>\r\n\r\n                      </div>\r\n                    </Zoom>\r\n                  }\r\n\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    size=\"large\"\r\n                    startIcon={<AddIcon />}\r\n                    style={{\r\n                      width: \"100%\",\r\n                      backgroundColor: '#FF4848',\r\n                      margin: \"15px auto 5px\"\r\n                    }}\r\n                    classes={{ label: 'pin-button' }}\r\n                    onClick={handleAddPinButtonClick}\r\n                  >\r\n                    ADD PIN\r\n                  </Button>\r\n\r\n                </form>\r\n\r\n              </div>\r\n            </Popup>\r\n          </Zoom>\r\n        }\r\n\r\n        <Zoom in={tooManyPins ? true : false} >\r\n\r\n          <div className=\"add-pin-text\">\r\n            <Paper\r\n              elevation={2}\r\n              style={{\r\n                position: \"absolute\",\r\n                fontSize: \"23px\",\r\n                top: \"40px\",\r\n                left: \"50%\",\r\n                transform: \"translate(-50%, -50%)\",\r\n                color: \"#FF4848\",\r\n                padding: \"15px 30px\",\r\n                margin: \"15px\"\r\n              }}>\r\n              You have too many pins! Users can only have 5 pins at a time.\r\n            </Paper>\r\n          </div>\r\n\r\n        </Zoom>\r\n\r\n        <Zoom in={!addingPin && currentUser ? true : false} >\r\n          <Fab\r\n            classes={{ label: \"add-pin-btn\" }}\r\n            style={{\r\n              backgroundColor: tooManyPins ? '#7B8B94' : '#FF4848',\r\n              position: 'absolute',\r\n              left: '20px',\r\n              bottom: width > 640 ? '55px' : '80px'\r\n            }}\r\n            size=\"small\"\r\n            onClick={handleAddPinButtonClick}\r\n          >\r\n            <AddIcon></AddIcon>\r\n          </Fab>\r\n        </Zoom>\r\n\r\n        <Zoom in={addingPin ? true : false} >\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            style={{\r\n              backgroundColor: '#7B8B94',\r\n              position: 'absolute',\r\n              left: '10px',\r\n              bottom: width > 640 ? '55px' : '80px'\r\n            }}\r\n            classes={{ label: 'pin-button' }}\r\n            onClick={handleCancelButtonClick}\r\n          >\r\n            CANCEL\r\n          </Button>\r\n        </Zoom>\r\n\r\n        <Zoom in={currentUser && width <= 485 ? true : false} >\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            style={{\r\n              backgroundColor: '#7B8B94',\r\n              position: 'absolute',\r\n              right: '10px',\r\n              bottom: width > 640 ? '55px' : '80px'\r\n            }}\r\n            classes={{ label: 'pin-button' }}\r\n            onClick={handleLogout}\r\n          >\r\n            LOG OUT\r\n          </Button>\r\n        </Zoom>\r\n\r\n      </ReactMapGL>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Map;\r\n","//jshint esversion:6\nimport Map from './components/map/Map.jsx';\n\n\nfunction App() {\n\n  return (\n    <div>\n      <Map />\n    </div>\n  );\n}\n\nexport default App;\n","//jshint esversion:6\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  //<React.StrictMode>\n    <App />,\n  //</React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}