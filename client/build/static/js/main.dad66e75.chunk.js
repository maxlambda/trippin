(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{134:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(19),r=n.n(c),s=n(32),l=n(14),i=n.n(l),o=n(25),u=n(43),j=n(5),b=n(34),d=n(26),p=n.n(d),O=n(85),x=n(159),h=n(162),f=n(30),m=n.n(f),g=n(161),v=(n(134),n(2));var y=function(e){return Object(v.jsx)("div",{className:"header",children:Object(v.jsx)(x.a,{style:{backgroundColor:"#111D5E"},children:Object(v.jsxs)(g.a,{children:[Object(v.jsx)(m.a,{}),Object(v.jsx)("h1",{className:"title",children:"trippin"}),e.currentUser?Object(v.jsx)("div",{className:"logout-btn",children:Object(v.jsx)(h.a,{size:"large",style:{height:"30px",color:"#C2FFD9",borderRadius:"10px"},onClick:function(){e.onLogout()},children:"LOG OUT"})}):Object(v.jsxs)("div",{className:"login-btns",children:[Object(v.jsx)(h.a,{size:"large",style:{height:"30px",color:"#9DDAC6",borderRadius:"10px"},onClick:function(){e.onLogin()},children:"LOGIN"}),Object(v.jsx)(h.a,{size:"large",style:{height:"30px",color:"#C2FFD9",borderRadius:"10px"},onClick:function(){e.onRegister()},children:"REGISTER"})]})]})})})},k=n(41),C=n.n(k);n(138);var N=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),l=Object(j.a)(s,2),u=l[0],b=l[1],d=Object(a.useState)(!1),O=Object(j.a)(d,2),x=O[0],f=O[1],g=Object(a.useRef)(),y=Object(a.useRef)();function k(){b(!1),f(!1),r(!1)}function N(){return(N=Object(o.a)(i.a.mark((function t(n){var a,c,s,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=g.current.value,c=y.current.value,""!==a&&null!==a){t.next=8;break}return b(!0),t.abrupt("return");case 8:if(""!==c&&null!==c){t.next=11;break}return f(!0),t.abrupt("return");case 11:return s={username:a,password:c},t.prev=12,r(!1),t.next=16,p.a.post("/users/login",s);case 16:l=t.sent,e.setLocalStorage(l.data.displayname),e.setCurrentUser(l.data.displayname),e.onClose(),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(12),r(!0),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[12,22]])})))).apply(this,arguments)}return Object(v.jsxs)("div",{className:"login-container",children:[Object(v.jsx)("div",{className:"logo",children:Object(v.jsx)(m.a,{fontSize:"large"})}),Object(v.jsx)(C.a,{className:"cancel",onClick:function(){return e.onClose()}}),Object(v.jsxs)("form",{onSubmit:function(e){return N.apply(this,arguments)},children:[Object(v.jsx)("input",{className:"inputs",type:"text",placeholder:"Username",ref:g,onClick:k,onChange:k}),u&&Object(v.jsx)("span",{className:"login-error",children:"Please enter a username."}),Object(v.jsx)("input",{className:"inputs",type:"password",placeholder:"Password",ref:y,onClick:k,onChange:k}),x&&Object(v.jsx)("span",{className:"login-error",children:"Please enter a password."}),Object(v.jsx)(h.a,{type:"submit",variant:"contained",size:"large",style:{color:"white",width:"100%",backgroundColor:"#111D5E",margin:"15px auto 5px"},children:"LOGIN"}),c&&Object(v.jsx)("span",{className:"login-error",children:"Invalid username and password combination."})]})]})};n(139);var S=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),l=Object(j.a)(s,2),u=l[0],b=l[1],d=Object(a.useState)(!1),O=Object(j.a)(d,2),x=O[0],f=O[1],g=Object(a.useState)(!1),y=Object(j.a)(g,2),k=y[0],N=y[1],S=Object(a.useState)(!1),w=Object(j.a)(S,2),z=w[0],F=w[1],I=Object(a.useState)(!1),B=Object(j.a)(I,2),D=B[0],R=B[1],E=Object(a.useRef)(),L=Object(a.useRef)(),P=Object(a.useRef)(),U=Object(a.useRef)();function T(){f(!1),N(!1),F(!1),R(!1)}function A(){return(A=Object(o.a)(i.a.mark((function e(t){var n,a,c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=E.current.value,a=L.current.value,c=P.current.value,s=U.current.value,""!==n&&null!==n){e.next=10;break}return f(!0),e.abrupt("return");case 10:if(""!==a&&null!==a){e.next=15;break}return N(!0),e.abrupt("return");case 15:if(""!==c&&null!==c){e.next=20;break}return F(!0),e.abrupt("return");case 20:if(""!==s&&null!==s){e.next=23;break}return R(!0),e.abrupt("return");case 23:return l={username:n,displayname:a,email:c,password:s},e.prev=24,r(!1),b(!1),e.next=29,p.a.post("/users/register",l);case 29:r(!0),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(24),b(!0),console.log(e.t0);case 36:case"end":return e.stop()}}),e,null,[[24,32]])})))).apply(this,arguments)}return Object(v.jsx)("div",{children:e.tooManyUsers?Object(v.jsxs)("div",{className:"register-container-too-many-users",children:[Object(v.jsx)(C.a,{className:"cancel",onClick:function(){return e.onClose()}}),Object(v.jsx)("span",{children:"Sorry, there are too many users! We currently only allow a finite number of users. Please contact the creator of the website."})]}):Object(v.jsxs)("div",{className:"register-container",children:[Object(v.jsx)("div",{className:"logo",children:Object(v.jsx)(m.a,{fontSize:"large"})}),Object(v.jsx)(C.a,{className:"cancel",onClick:function(){return e.onClose()}}),Object(v.jsxs)("form",{onSubmit:function(e){return A.apply(this,arguments)},children:[Object(v.jsx)("input",{className:"inputs",type:"text",placeholder:"Username",ref:E,onClick:T,onChange:T}),x&&Object(v.jsx)("span",{className:"register-error",children:"Please enter a username."}),Object(v.jsx)("input",{className:"inputs",type:"text",placeholder:"Display Name",ref:L,onClick:T,onChange:T}),k&&Object(v.jsx)("span",{className:"register-error",children:"Please enter a display name."}),Object(v.jsx)("input",{className:"inputs",type:"email",placeholder:"Email",ref:P,onClick:T,onChange:T}),z&&Object(v.jsx)("span",{className:"register-error",children:"Please enter an email."}),Object(v.jsx)("input",{className:"inputs",type:"password",placeholder:"Password",ref:U,onClick:T,onChange:T}),D&&Object(v.jsx)("span",{className:"register-error",children:"Please enter a password."}),Object(v.jsx)(h.a,{type:"submit",variant:"contained",size:"large",style:{color:"white",width:"100%",backgroundColor:"#FF4848",margin:"15px auto 5px"},children:"REGISTER"}),c&&Object(v.jsx)("span",{className:"register-success",children:"Registered successfully!"}),u&&Object(v.jsx)("span",{className:"register-error",children:"Failed to register."})]})]})})},w=(n(140),n(60)),z=n.n(w),F=n(83),I=n.n(F),B=n(84),D=n.n(B),R=n(82),E=n.n(R),L=n(52),P=n.n(L),U=n(163),T=n(143),A=n(59),_=n.n(A),G=n(81),J=n.n(G),M=n(164),W=null;var Z=function(){var e=window.localStorage,t=Object(a.useState)(e.getItem("user")),n=Object(j.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(!1),d=Object(j.a)(l,2),x=d[0],f=d[1],m=Object(a.useState)([]),g=Object(j.a)(m,2),k=g[0],C=g[1],w=Object(a.useState)(!1),F=Object(j.a)(w,2),B=F[0],R=F[1],L=Object(a.useState)(null),A=Object(j.a)(L,2),G=A[0],Z=A[1],Y=Object(a.useState)(!1),H=Object(j.a)(Y,2),V=H[0],q=H[1],Q=Object(a.useState)(!1),K=Object(j.a)(Q,2),X=K[0],$=K[1],ee=Object(a.useState)(!1),te=Object(j.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(!1),re=Object(j.a)(ce,2),se=re[0],le=re[1],ie=Object(a.useState)(null),oe=Object(j.a)(ie,2),ue=oe[0],je=oe[1],be=Object(a.useState)(null),de=Object(j.a)(be,2),pe=de[0],Oe=de[1],xe=Object(a.useState)(null),he=Object(j.a)(xe,2),fe=he[0],me=he[1],ge=Object(a.useState)(0),ve=Object(j.a)(ge,2),ye=ve[0],ke=ve[1],Ce=Object(a.useState)(!1),Ne=Object(j.a)(Ce,2),Se=Ne[0],we=Ne[1],ze=Object(a.useState)(!1),Fe=Object(j.a)(ze,2),Ie=Fe[0],Be=Fe[1],De=Object(a.useState)(!1),Re=Object(j.a)(De,2),Ee=Re[0],Le=Re[1],Pe=Object(a.useState)({width:"100vw",height:"100vh",latitude:36.64920667168877,longitude:-21.007683545740246,zoom:2}),Ue=Object(j.a)(Pe,2),Te=Ue[0],Ae=Ue[1];function _e(e,t,n){Z(e),$(!1),Ae(Object(u.a)(Object(u.a)({},Te),{},{latitude:t,longitude:n}))}function Ge(){var e=0;k.forEach((function(t){t.displayname===c&&e++})),e>4?(R(!0),setTimeout((function(){return R(!1)}),5e3)):(W=G,q(!0)),Z(null)}function Je(){return(Je=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==pe&&null!==pe){e.next=6;break}return we(!0),e.abrupt("return");case 6:if(""!==fe&&null!==fe){e.next=11;break}return Be(!0),e.abrupt("return");case 11:if(!(ye<1||ye>5||null===ye)){e.next=14;break}return Le(!0),e.abrupt("return");case 14:return n={displayname:c,title:pe,desc:fe,rating:ye,lat:ue.lat,long:ue.long},e.prev=15,e.next=18,p.a.post("/pins",n);case 18:a=e.sent,C([].concat(Object(s.a)(k),[a.data])),je(null),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(15),console.log(e.t0);case 26:q(!1),Oe(null),me(null),ke(null),$(!1);case 31:case"end":return e.stop()}}),e,null,[[15,23]])})))).apply(this,arguments)}function Me(){return(Me=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={_id:t},e.prev=1,e.next=4,p.a.post("/pins/delete",n);case 4:a=k.filter((function(e){return e._id!==t})),C(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:Z(null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/pins");case 3:t=e.sent,C(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/users");case 3:e.sent.data.length>49&&f(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),Object(v.jsx)("div",{children:Object(v.jsxs)(b.d,Object(u.a)(Object(u.a)({},Te),{},{mapboxApiAccessToken:"pk.eyJ1IjoibWF4bmlmaWNlbmNlIiwiYSI6ImNrdDJhbWF3bDBuMjkyb290bHMycGlkZHkifQ.UToyvyZoUsBV42ezfZLujA",onViewportChange:function(e){return Ae(e)},mapStyle:"mapbox://styles/safak/cknndpyfq268f17p53nmpwira",transitionDuration:10,transitionInterpolator:new b.a,doubleClickZoom:!1,onDblClick:function(e){if(we(!1),Be(!1),Le(!1),V){var t=Object(j.a)(e.lngLat,2),n=t[0],a=t[1];je({lat:a,long:n})}else Z(null)},children:[Object(v.jsx)(y,{currentUser:c,localStorage:e,onLogout:function(){e.removeItem("user"),r(null)},onRegister:function(){ae(!ne),le(!1)},onLogin:function(){ae(!1),le(!se)}}),se&&Object(v.jsx)(M.a,{in:!0,children:Object(v.jsx)(N,{currenUser:c,localStorage:e,setCurrentUser:r,setLocalStorage:function(t){!function(t){e.setItem("user",t)}(t)},onClose:function(){return le(!1)}})}),ne&&Object(v.jsx)(M.a,{in:!0,children:Object(v.jsx)(S,{currentUser:c,onClose:function(){return ae(!1)},tooManyUsers:x})}),V&&null!==ue&&Object(v.jsx)(b.b,{latitude:ue.lat,longitude:ue.long,offsetLeft:-20,offsetTop:-40,children:Object(v.jsx)(M.a,{in:!0,children:Object(v.jsx)(_.a,{style:{fontSize:"40px",color:"#FF4848"}})})}),k.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{style:{zIndex:"0",position:"fixed"},children:Object(v.jsx)(b.b,{latitude:e.lat,longitude:e.long,offsetLeft:-20,offsetTop:-40,children:Object(v.jsx)(M.a,{in:!(V||ne||se),children:Object(v.jsx)(_.a,{style:{fontSize:"40px",color:G===e._id?"#FF4848":e.displayname===c?"#111D5E":"#7B8B94",cursor:"pointer"},onClick:function(){return null===G?_e(e._id,e.lat,e.long):G===e._id?Z(null):_e(e._id,e.lat,e.long)}})})})}),G===e._id&&!ne&&!se&&Object(v.jsx)("div",{className:"popup",children:Object(v.jsx)(M.a,{in:!0,children:Object(v.jsx)(b.c,{latitude:e.lat,longitude:e.long,offsetLeft:20,closeButton:!0,closeOnClick:!1,onClose:function(){return Z(null)},anchor:"left",children:Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("h4",{className:"title",children:e.title}),Object(v.jsx)("label",{children:"Review:"}),Object(v.jsx)("p",{className:"desc",children:e.desc}),Object(v.jsx)("label",{children:"Rating:"}),Object(v.jsx)("div",{className:"stars",children:Array(e.rating).fill(Object(v.jsx)(J.a,{className:"star"}))}),Object(v.jsx)("label",{children:"Information:"}),Object(v.jsxs)("span",{className:"username",children:["Created by ",Object(v.jsx)("b",{children:e.displayname})]}),Object(v.jsx)("span",{className:"createdDate",children:Object(O.a)(e.createdAt)}),e.displayname===c&&!X&&Object(v.jsx)(h.a,{variant:"contained",color:"secondary",size:"large",startIcon:Object(v.jsx)(E.a,{}),style:{width:"100%",backgroundColor:"#7B8B94",margin:"15px auto 5px"},classes:{label:"pin-button"},onClick:function(){return $(!0)},children:"DELETE PIN"}),e.displayname===c&&X&&null!==G&&Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"deleting-pin",children:"Are you sure you want to delete this pin?"}),Object(v.jsx)(h.a,{variant:"contained",color:"secondary",size:"large",startIcon:Object(v.jsx)(I.a,{}),style:{width:"45%",backgroundColor:"#FF4848",margin:"15px auto 5px"},classes:{label:"pin-button"},onClick:function(){return function(e){return Me.apply(this,arguments)}(e._id)},children:"YES"}),Object(v.jsx)(h.a,{variant:"contained",color:"secondary",size:"large",startIcon:Object(v.jsx)(D.a,{}),style:{position:"absolute",right:"10px",width:"45%",backgroundColor:"#7B8B94",margin:"15px auto 5px"},classes:{label:"pin-button"},onClick:function(){return $(!1)},children:"NO"})]})]})})})})]},e._id)})),ue&&V&&Object(v.jsx)(M.a,{in:!0,children:Object(v.jsx)(b.c,{latitude:ue.lat,longitude:ue.long,offsetLeft:20,closeButton:!0,closeOnClick:!1,onClose:function(){return je(null)},anchor:"left",children:Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:function(e){return Je.apply(this,arguments)},children:[Object(v.jsx)("label",{children:"Place name"}),Object(v.jsx)("input",{placeholder:"Enter a title...",onClick:function(){return we(!1)},onChange:function(e){return Oe(e.target.value)}}),Se&&Object(v.jsx)(M.a,{in:!0,children:Object(v.jsxs)("div",{className:"error",children:[Object(v.jsx)(P.a,{size:"small",style:{color:"#7B8B94"}}),Object(v.jsx)("p",{children:"Please enter a place name."})]})}),Object(v.jsx)("label",{children:"Review"}),Object(v.jsx)("textarea",{placeholder:"Tell us about this place...",onClick:function(){return Be(!1)},onChange:function(e){return me(e.target.value)}}),Ie&&Object(v.jsx)(M.a,{in:!0,children:Object(v.jsxs)("div",{className:"error",children:[Object(v.jsx)(P.a,{size:"small",style:{color:"#7B8B94"}}),Object(v.jsx)("p",{children:"Please enter a description."})]})}),Object(v.jsx)("label",{children:"Rating"}),Object(v.jsxs)("select",{onClick:function(){return Le(!1)},onChange:function(e){return ke(e.target.value)},children:[Object(v.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"Choose rating..."}),Object(v.jsx)("option",{value:"1",children:"1"}),Object(v.jsx)("option",{value:"2",children:"2"}),Object(v.jsx)("option",{value:"3",children:"3"}),Object(v.jsx)("option",{value:"4",children:"4"}),Object(v.jsx)("option",{value:"5",children:"5"})]}),Ee&&Object(v.jsx)(M.a,{in:!0,children:Object(v.jsxs)("div",{className:"error",children:[Object(v.jsx)(P.a,{size:"small",style:{color:"#7B8B94"}}),Object(v.jsx)("p",{children:"Please enter a rating."})]})}),Object(v.jsx)(h.a,{type:"submit",variant:"contained",color:"secondary",size:"large",startIcon:Object(v.jsx)(z.a,{}),style:{width:"100%",backgroundColor:"#FF4848",margin:"15px auto 5px"},classes:{label:"pin-button"},onClick:Ge,children:"ADD PIN"})]})})})}),Object(v.jsx)(M.a,{in:!!V,children:Object(v.jsx)("div",{className:"add-pin-text",children:Object(v.jsx)(T.a,{elevation:2,style:{position:"absolute",fontSize:"23px",top:"40px",left:"50%",transform:"translate(-50%, -50%)",color:"#FF4848",padding:"15px 30px",margin:"15px"},children:"Double-click anywhere to add a pin."})})}),Object(v.jsx)(M.a,{in:!!B,children:Object(v.jsx)("div",{className:"add-pin-text",children:Object(v.jsx)(T.a,{elevation:2,style:{position:"absolute",fontSize:"23px",top:"40px",left:"50%",transform:"translate(-50%, -50%)",color:"#FF4848",padding:"15px 30px",margin:"15px"},children:"You have too many pins! Users can only have 5 pins at a time."})})}),Object(v.jsx)(M.a,{in:!V&&""!==c&&null!==c,children:Object(v.jsx)(U.a,{style:{backgroundColor:B?"#7B8B94":"#FF4848",position:"absolute",left:"10px",bottom:"40px"},size:"small",onClick:Ge,children:Object(v.jsx)(z.a,{})})}),Object(v.jsx)(M.a,{in:!!V,children:Object(v.jsx)(h.a,{variant:"contained",color:"secondary",size:"large",style:{backgroundColor:"#7B8B94",position:"absolute",left:"10px",bottom:"40px"},classes:{label:"pin-button"},onClick:function(){q(!1),je(null),Z(W)},children:"CANCEL"})})]}))})};var Y=function(){return Object(v.jsx)("div",{children:Object(v.jsx)(Z,{})})};r.a.render(Object(v.jsx)(Y,{}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.dad66e75.chunk.js.map